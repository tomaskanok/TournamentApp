@model TournamentApp.Models.Tournament

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@Model.Name @if (ViewBag.InTournament){<img src="~/images/Success-icon.png" data-toggle="tooltip" data-placement="right" title="jste přihlášen do tohoto turnaje" />}</h2>

<div>
    <dl class="">
        <dt>
            @Html.DisplayNameFor(model => model.Location)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Location)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Web)
        </dt>
      
        <dd>
            @if (((String)@Model.Web).Contains("http://") )
            {
                string web = @Model.Web;
                web = web.Substring(7, web.Length - 7);
                <a href="http://@web" target="_blank">@web</a>
            }
            else
            {
                string web = @Model.Web;
                <a href="http://@web" target="_blank">@web</a>
            }
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Prize)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Prize)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Info)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Info)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.StartReg)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartReg)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndReg)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EndReg)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EndDate)
        </dd>

    </dl>
</div>

<h3>Začátečníci muži</h3>
@foreach (var group in ViewBag.allUsersInTournament)
{
    if (group.Belt == "white" && group.SexMale == true)
    {
        <h4>@group.WeightKg Kg <span class="badge">@group.RegistredUsers.Count</span></h4>
        foreach (var user in @group.RegistredUsers)
        {
            <p>@user.UserName</p>
        }
    }
}

@if (ViewBag.InTournament)
{
    <p>Jste zaregistrovaný do turnaje.</p>
}
else
{
    <h3 id="registration">Zaregistrujte se</h3>
    using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)
        @Html.AntiForgeryToken()
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                @Html.Hidden("tournamentId", (Int32)@ViewBag.tournamentId)
                @Html.DropDownList("SelectList", "Vyberte svoji váhovku")
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Registrovat se" class="btn btn-success" />
            </div>
        </div>
    }
}


<h3>Přidat kategorii</h3>